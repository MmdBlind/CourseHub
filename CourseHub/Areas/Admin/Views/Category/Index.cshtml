@model List<CourseHub.Areas.Admin.Models.ViewModels.GetAllCategoriesViewModel>

@{
    var q = (ViewData["q"] as string) ?? "";
}

<div class="d-flex align-items-center justify-content-between gap-3 mb-3">
    <!-- راست: سرچ -->
    <form method="get" asp-action="Index" class="flex-grow-1" style="max-width: 640px;">
        <div class="input-group searchbar">
            <button class="btn icon-btn btn-search" type="submit" title="جستجو">
                <i class="bi bi-search"></i>
            </button>
            <input type="text"
                   name="q"
                   value="@q"
                   class="form-control text-end"
                   placeholder="نام و اسلاگ" />

            

            @if (!string.IsNullOrWhiteSpace(q))
            {
                <a asp-action="Index" class="btn icon-btn btn-clear" title="پاک‌کردن جستجو">
                    <i class="bi bi-x-lg"></i>
                </a>
            }
        </div>
    </form>

    <!-- چپ: دکمهٔ افزودن (کمی بزرگ‌تر) -->
    <a asp-area="Admin" asp-controller="Category" asp-action="Create"
       class="btn btn-success btn-add">
        <i class="bi bi-plus-lg"></i>
        افزودن دسته
    </a>
</div>

<div class="card-body stat-box no-hover">
    <div class="table-admin-wrap mt-4">
        <table class="table-admin compact" dir="rtl">
            <thead>
                <tr>
                    <th>نام دسته</th>
                    <th>اسلاگ</th>
                    <th>دسته مرتبط</th>
                    <th>تعداد دوره</th>
                    <th>عملیات</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model )
                {
                    <tr>
                        <td class="col-title">@item.Name</td>
                        <td class="col-slug">
                            <span class="slug-chip" dir="rtl">
                                @item.Slug
                            </span>
                        </td>
                        <td class="col-title">
                            @item.ParentName
                        </td>
                        <td>
                            @item.CoursesCount
                        </td>
                        <td>
                            <a class="table-action"
                               asp-area="Admin" asp-controller="Category" asp-action="Edit" asp-route-id="@item.ID">
                                ویرایش
                            </a>
                            <a class="table-action table-action--danger"
                               asp-area="Admin" asp-controller="Category" asp-action="Delete" asp-route-id="@item.ID">
                                حذف
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>